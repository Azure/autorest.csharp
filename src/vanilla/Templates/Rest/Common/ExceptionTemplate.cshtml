@using System.Linq
@using AutoRest.CSharp
@using AutoRest.CSharp.Model
@using AutoRest.Extensions
@using AutoRest.Core.Model
@using AutoRest.Core.Utilities

@inherits AutoRest.Core.Template<AutoRest.CSharp.Model.CompositeTypeCs>
@Header("// ")
@EmptyLine
namespace @(Settings.Namespace).@(Settings.ModelsName)
{
@EmptyLine
    /// <summary>
    @WrapComment("/// ", "Exception thrown for an invalid response with " + Model.Name + " information.")
    /// </summary>
    @{
        var underlyingErrorModelType = Model.Name;
        if(Model.IsSequenceTypeExceptionModel)
        {
            underlyingErrorModelType = "System.Collections.Generic.IList<"+underlyingErrorModelType+">";
        }
        var baseModelType = "Microsoft.Rest.HttpRestExceptionBase<"+underlyingErrorModelType+">";
    }
    public partial class @Model.ExceptionModelName : @baseModelType
    {
@EmptyLine
        /// <summary>
        /// Initializes a new instance of the @Model.ExceptionModelName class.
        /// </summary>
        public @(@Model.ExceptionModelName)()
        {
        }
@EmptyLine
        /// <summary>
        /// Initializes a new instance of the @Model.ExceptionModelName class.
        /// </summary>
        /// <param name="message">The exception message.</param>
        public @(Model.ExceptionModelName)(string message)
            : this(message, null)
        {
        }
@EmptyLine
        /// <summary>
        /// Initializes a new instance of the @Model.ExceptionModelName class.
        /// </summary>
        /// <param name="message">The exception message.</param>
        /// <param name="innerException">Inner exception.</param>
        public @(Model.ExceptionModelName)(string message, System.Exception innerException)
            : base(message, innerException)
        {
        }
@EmptyLine

@{
var props = Model.InstanceProperties;
var modelType = Model.BaseModelType;
while(modelType!=null && modelType is CompositeTypeCs)
{
props = props.Union((modelType as CompositeTypeCs).InstanceProperties);
modelType=modelType.BaseModelType;
}
}
@if(!Model.IsSequenceTypeExceptionModel)
{
foreach (PropertyCs property in props)
{
        @:/// <summary>
        @:@WrapComment("/// ", property.GetFormattedPropertySummary())
        @:/// </summary>
            if(!string.IsNullOrEmpty(property.Summary) && !string.IsNullOrEmpty(property.Documentation))
            { 
        @:/// <remarks>
        @:@WrapComment("/// ", property.Documentation)
        @:/// </remarks>
            }
        @:public @property.ModelTypeName @property.Name => Body.@property.Name;
        @EmptyLine
}
}
else
{
        @:/// <summary>
        @:@WrapComment("/// ", "Returns list of deserialized error models")
        @:/// </summary>
        @:public @("System.Collections.Generic.IList<"+Model.Name+">") ErrorModels => Body;
}

    }
}