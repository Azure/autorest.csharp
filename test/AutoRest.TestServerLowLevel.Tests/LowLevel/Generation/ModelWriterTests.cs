using System.Collections.Generic;
using AutoRest.CSharp.Common.Input;
using AutoRest.CSharp.Generation.Types;
using AutoRest.CSharp.Output.Models.Types;
using NUnit.Framework;

namespace AutoRest.CSharp.Generation.Writers.Tests
{
    public class LowLevelModelWriterTests
    {
        [Test]
        public void InputBasic()
        {
            // refer to the original CADL file: https://github.com/annelo-msft/azure-sdk-for-net/blob/cadl-models-roundtrip-basic/sdk/template/Azure.Template/src/Generated/Models/RoundTripModel.cs
            var model = new ModelTypeProvider(
                new InputModelType("InputModel", "Cadl.TestServer.InputBasic", "public",
                    new List<InputModelProperty>{
                        new InputModelProperty("requiredString", "requiredString", "Required string, illustrating a reference type property.", InputPrimitiveType.String, true, true, false),
                        new InputModelProperty("requiredInt", "requiredInt", "Required int, illustrating a value type property.", InputPrimitiveType.Int32, true, true, false)
                    },
                    null, null, null),
                new TypeFactory(null),
                "test",
                null);

            var codeWriter = new CodeWriter();
            LowLevelModelWriter.WriteType(codeWriter, model);
            var codes = codeWriter.ToString();

            Assert.AreEqual(codes, @"// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

// <auto-generated/>

#nullable disable

using System;
using Azure.Core;

namespace Cadl.TestServer.InputBasic
{
public partial class InputModel
{
/// <summary> Required string, illustrating a reference type property. </summary>
public string RequiredString{ get; }

/// <summary> Required int, illustrating a value type property. </summary>
public int RequiredInt{ get; }

/// <summary> Initializes a new instance of InputModel. </summary>
/// <param name=""requiredString""> Required string, illustrating a reference type property. </param>
/// <param name=""requiredInt""> Required int, illustrating a value type property. </param>
/// <exception cref=""global::System.ArgumentNullException""> <paramref name=""requiredString""/> is null. </exception>
public InputModel(string requiredString,int requiredInt)
{
global::Azure.Core.Argument.AssertNotNull(requiredString, nameof(requiredString));

RequiredString = requiredString;
RequiredInt = requiredInt;
}
}
}
");
        }
    }
}
