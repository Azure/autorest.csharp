// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
#region Usings

// <auto-generated/>

#nullable disable

using System;
using System.Text.Json;
using System.Threading.Tasks;
using Azure;
using Azure.Core;
using Azure.Identity;
using Azure.ResourceManager;
using MgmtMockTest.Models;
#endregion

#region Parameter decalarations
// Below parameters are extracted from swagger example files, please use your own values to execute the API lively.
ArmClient GetArmClient() => new ArmClient(new DefaultAzureCredential());
var scope = "scope";  // The scope of the role assignment to create. The scope can be any REST resource instance. For example, use '/subscriptions/{subscription-id}/' for a subscription, '/subscriptions/{subscription-id}/resourceGroups/{resource-group-name}' for a resource group, and '/subscriptions/{subscription-id}/resourceGroups/{resource-group-name}/providers/{resource-provider}/{resource-type}/{resource-name}' for a resource.
var roleAssignmentName = "roleAssignmentName";  // A GUID for the role assignment to create. The name must be unique and different for each role assignment.
#endregion

#region API invocation
// api-version: 2017-10-01-preview
// x-ms-original-file: file:///C:/ZZ/projects/codegen/autorest.csharp/test/TestProjects/MgmtMockTest/src/examples/PutRoleAssignment.json
// Example: Create role assignment

var resourceId = new ResourceIdentifier(string.Format("/{0}", scope));
var resource = GetArmClient().GetGenericResource(resourceId);
var collection = resource.GetRoleAssignments();
var operation = collection.CreateOrUpdate(WaitUntil.Completed, roleAssignmentName, new RoleAssignmentCreateOrUpdateContent()
{
    RoleDefinitionId = "/subscriptions/4004a9fd-d58e-48dc-aeb2-4a4aec58606f/providers/Microsoft.Authorization/roleDefinitions/de139f84-1756-47ae-9be6-808fbbe84772",
    PrincipalId = "d93a38bc-d029-4160-bfb0-fbda779ac214",
    CanDelegate = false,
});

Console.WriteLine($"Succeed on ResourceId: {operation.Value.Data.Id}");
Console.WriteLine($"Full Resource content: {JsonSerializer.Serialize(operation.Value.Data)}");
#endregion
