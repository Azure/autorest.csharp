// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
#region Usings

// <auto-generated/>

#nullable disable

using System;
using System.Text.Json;
using System.Threading.Tasks;
using Azure.Core;
using Azure.Identity;
using Azure.ResourceManager;
#endregion

#region Parameter decalarations
// Below parameters are extracted from swagger example files, please use your own values to execute the API lively.
ArmClient GetArmClient() => new ArmClient(new DefaultAzureCredential());
var subscriptionId = Environment.GetEnvironmentVariable("SUBSCRIPTION_ID") ?? "00000000-0000-0000-0000-000000000000";
var resourceGroupName = "rgname";  // Name of the resource group that contains the key vault.
var resourceProviderNamespace = "resourceProviderNamespace";  // The namespace of the resource provider.
var parentResourcePath = "parentResourcePath";  // The parent resource identity.
var resourceType = "resourceType";  // The resource type of the resource.
var resourceName = "resourceName";  // The name of the resource to get role assignments for.
#endregion

#region API invocation
// api-version: 2017-10-01-preview
// x-ms-original-file: file:///C:/ZZ/projects/codegen/autorest.csharp/test/TestProjects/MgmtMockTest/src/examples/GetRoleAssignmentsForResource.json
// Example: List role assignments for resource

var resourceId = new ResourceIdentifier(string.Format("/subscriptions/{0}/resourcegroups/{1}/providers/{2}/{3}/{4}/{5}", subscriptionId, resourceGroupName, resourceProviderNamespace, parentResourcePath, resourceType, resourceName));
var resource = GetArmClient().GetGenericResource(resourceId);
var collection = resource.GetRoleAssignments();
foreach (var _ in collection.GetAll())
{
    Console.WriteLine($"ResourceId: {_.Data.Id}");
    Console.WriteLine($"Full Resource content: {JsonSerializer.Serialize(_.Data)}");
}
#endregion
