import "@azure-tools/cadl-azure-core";
import "@cadl-lang/openapi";
import "@cadl-lang/rest";
import "@cadl-lang/versioning";

using Cadl.Http;

@serviceTitle("Text authoring")
@serviceVersion("2022-05-15-preview")
namespace LroBasicCadl;


@Cadl.Rest.resource("projects")
model Project {
  @key
  @visibility("read")
  id: string;
  description?: string;

  name?: string;
}

interface Authoring {
  createProjectStatusMonitor is CustomCore.PollingOperation<Project>;

  @OpenAPI.extension("x-ms-convenient-api", true)
  @Azure.Core.pollingOperation(Authoring.createProjectStatusMonitor)
  createProject is Azure.Core.LongRunningResourceCreateWithServiceProvidedName<Project>;
  
  @OpenAPI.extension("x-ms-convenient-api", true)
  @Azure.Core.pollingOperation(Authoring.createProjectStatusMonitor)
  @OpenAPI.extension("x-ms-convenient-api", true)
  op updateProject is Azure.Core.Foundations.Operation<Project, Project>;
}

namespace CustomCore {
  @Cadl.Rest.parentResource(T)
  @Cadl.Rest.resource("operations")
  model OperationStatusResource<T> is Azure.Core.Foundations.OperationStatus {
    operationId: string;
  }

  @Cadl.Http.route("operations")
  @OpenAPI.extension("x-ms-convenient-api", true)
  op PollingOperation<TCustom> is Azure.Core.ResourceRead<OperationStatusResource<TCustom>>;
}
