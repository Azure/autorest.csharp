import "@cadl-lang/rest";
import "@cadl-lang/openapi";
import "@azure-tools/cadl-dpg";
import "@azure-tools/cadl-azure-core";

using Cadl.Versioning;
using Cadl.Http;
using Azure.DPG;
using Azure.Core;

@service({title: "Spread"})
@versioned(QueryApiVersion)
@doc("This is a spread model or alias service.")
@server("http://localhost:300","Endpoint Service")
@useAuth(OAuth2Auth<[ {
    type: OAuth2FlowType.clientCredentials;
    tokenUrl: "https://api.example.com/oauth2/token";
    refreshUrl: "https://api.example.com/oauth2/refresh";
    scopes: [
        "https://api.example.com/.default"
    ]
}]> | ApiKeyAuth<ApiKeyLocation.header, "x-ms-api-key">)

namespace Spread;

enum QueryApiVersion {
  v2022_01_01_preview: "2022-01-01-preview"
}

model Thing {
  @doc("name of the Thing")
  name: string;
  @doc("age of the Thing")
  age: int32;
}

@route("/spreadModel")
@doc("body parameter without body decorator")
@post
@convenienceAPI
op spreadModel( ...Thing ): void;