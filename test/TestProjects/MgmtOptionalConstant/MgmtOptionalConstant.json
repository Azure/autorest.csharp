{
    "swagger": "2.0",
    "info": {
        "title": "ComputeManagementClient",
        "description": "The Compute Management Client.",
        "version": "2020-06-01"
    },
    "host": "management.azure.com",
    "schemes": [
        "https"
    ],
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "security": [
        {
            "azure_auth": [
                "user_impersonation"
            ]
        }
    ],
    "securityDefinitions": {
        "azure_auth": {
            "type": "oauth2",
            "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
            "flow": "implicit",
            "description": "Azure Active Directory OAuth2 Flow",
            "scopes": {
                "user_impersonation": "impersonate your user account"
            }
        }
    },
    "paths": {
        "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Constant/optionalMachines/{name}": {
            "put": {
                "tags": [
                    "VirtualMachines"
                ],
                "operationId": "Optionals_CreateOrUpdate",
                "description": "The operation to create or update a virtual machine. Please note some properties can be set only during virtual machine creation.",
                "parameters": [
                    {
                        "name": "resourceGroupName",
                        "in": "path",
                        "required": true,
                        "type": "string",
                        "description": "The name of the resource group."
                    },
                    {
                        "name": "name",
                        "in": "path",
                        "required": true,
                        "type": "string",
                        "description": "The name of the virtual machine."
                    },
                    {
                        "name": "parameters",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/OptionalMachine"
                        },
                        "description": "Parameters supplied to the Create Virtual Machine operation."
                    },
                    {
                        "$ref": "#/parameters/ApiVersionParameter"
                    },
                    {
                        "$ref": "#/parameters/SubscriptionIdParameter"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/OptionalMachine"
                        }
                    },
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/OptionalMachine"
                        }
                    }
                },
                "x-ms-long-running-operation": true
            },
            "patch": {
                "tags": [
                    "VirtualMachines"
                ],
                "operationId": "Optionals_Update",
                "description": "The operation to update a virtual machine.",
                "parameters": [
                    {
                        "name": "resourceGroupName",
                        "in": "path",
                        "required": true,
                        "type": "string",
                        "description": "The name of the resource group."
                    },
                    {
                        "name": "name",
                        "in": "path",
                        "required": true,
                        "type": "string",
                        "description": "The name of the virtual machine."
                    },
                    {
                        "name": "parameters",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/VirtualMachineUpdate"
                        },
                        "description": "Parameters supplied to the Update Virtual Machine operation."
                    },
                    {
                        "$ref": "#/parameters/ApiVersionParameter"
                    },
                    {
                        "$ref": "#/parameters/SubscriptionIdParameter"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/OptionalMachine"
                        }
                    },
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/OptionalMachine"
                        }
                    }
                },
                "x-ms-long-running-operation": true
            },
            "delete": {
                "tags": [
                    "VirtualMachines"
                ],
                "operationId": "Optionals_Delete",
                "description": "The operation to delete a virtual machine.",
                "parameters": [
                    {
                        "name": "resourceGroupName",
                        "in": "path",
                        "required": true,
                        "type": "string",
                        "description": "The name of the resource group."
                    },
                    {
                        "name": "name",
                        "in": "path",
                        "required": true,
                        "type": "string",
                        "description": "The name of the virtual machine."
                    },
                    {
                        "name": "forceDeletion",
                        "in": "query",
                        "required": false,
                        "type": "boolean",
                        "description": "Optional parameter to force delete virtual machines."
                    },
                    {
                        "$ref": "#/parameters/ApiVersionParameter"
                    },
                    {
                        "$ref": "#/parameters/SubscriptionIdParameter"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "202": {
                        "description": "Accepted"
                    },
                    "204": {
                        "description": "No Content"
                    }
                },
                "x-ms-long-running-operation": true
            },
            "get": {
                "tags": [
                    "VirtualMachines"
                ],
                "operationId": "Optionals_Get",
                "description": "Retrieves information about the model view or the instance view of a virtual machine.",
                "parameters": [
                    {
                        "name": "resourceGroupName",
                        "in": "path",
                        "required": true,
                        "type": "string",
                        "description": "The name of the resource group."
                    },
                    {
                        "name": "name",
                        "in": "path",
                        "required": true,
                        "type": "string",
                        "description": "The name of the virtual machine."
                    },
                    {
                        "name": "$expand",
                        "in": "query",
                        "required": false,
                        "type": "string",
                        "description": "The expand expression to apply on the operation.",
                        "enum": [
                            "instanceView"
                        ],
                        "x-ms-enum": {
                            "name": "InstanceViewTypes",
                            "modelAsString": false
                        }
                    },
                    {
                        "$ref": "#/parameters/ApiVersionParameter"
                    },
                    {
                        "$ref": "#/parameters/SubscriptionIdParameter"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/OptionalMachine"
                        }
                    }
                }
            }
        },
        "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Constant/optionalMachines": {
            "get": {
                "tags": [
                    "VirtualMachines"
                ],
                "operationId": "Optionals_List",
                "description": "Lists all of the virtual machines in the specified resource group. Use the nextLink property in the response to get the next page of virtual machines.",
                "parameters": [
                    {
                        "name": "resourceGroupName",
                        "in": "path",
                        "required": true,
                        "type": "string",
                        "description": "The name of the resource group."
                    },
                    {
                        "$ref": "#/parameters/ApiVersionParameter"
                    },
                    {
                        "$ref": "#/parameters/SubscriptionIdParameter"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/OptionalMachineListResult"
                        }
                    }
                },
                "x-ms-pageable": {
                    "nextLinkName": "nextLink"
                }
            }
        },
        "/subscriptions/{subscriptionId}/providers/Microsoft.Constant/optionalMachines": {
            "get": {
                "tags": [
                    "VirtualMachines"
                ],
                "operationId": "Optionals_ListAll",
                "description": "Lists all of the virtual machines in the specified subscription. Use the nextLink property in the response to get the next page of virtual machines.",
                "parameters": [
                    {
                        "$ref": "#/parameters/ApiVersionParameter"
                    },
                    {
                        "$ref": "#/parameters/SubscriptionIdParameter"
                    },
                    {
                        "name": "statusOnly",
                        "in": "query",
                        "required": false,
                        "type": "string",
                        "description": "statusOnly=true enables fetching run time status of all Virtual Machines in the subscription."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/OptionalMachineListResult"
                        }
                    }
                },
                "x-ms-pageable": {
                    "nextLinkName": "nextLink"
                }
            }
        }
    },
    "definitions": {
        "Plan": {
            "properties": {
                "name": {
                    "type": "string",
                    "description": "The plan ID."
                },
                "publisher": {
                    "type": "string",
                    "description": "The publisher ID."
                },
                "product": {
                    "type": "string",
                    "description": "Specifies the product of the image from the marketplace. This is the same value as Offer under the imageReference element."
                },
                "promotionCode": {
                    "type": "string",
                    "description": "The promotion code."
                }
            },
            "description": "Specifies information about the marketplace image used to create the virtual machine. This element is only used for marketplace images. Before you can use a marketplace image from an API, you must enable the image for programmatic use.  In the Azure portal, find the marketplace image that you want to use and then click **Want to deploy programmatically, Get Started ->**. Enter any required information and then click **Save**."
        },
        "PassNameSchema": {
            "type": "string",
            "description": "The pass name. Currently, the only allowable value is OobeSystem.",
            "enum": [
                "OobeSystem"
            ],
            "x-ms-enum": {
                "name": "PassNames",
                "modelAsString": false
            }
        },
        "AdditionalContent": {
            "properties": {
                "passName": {
                    "$ref": "#/definitions/PassNameSchema"
                },
                "componentName": {
                    "type": "string",
                    "description": "The component name. Currently, the only allowable value is Microsoft-Windows-Shell-Setup.",
                    "enum": [
                        "Microsoft-Windows-Shell-Setup"
                    ],
                    "x-ms-enum": {
                        "name": "ComponentNames",
                        "modelAsString": false
                    }
                },
                "settingName": {
                    "type": "string",
                    "description": "Specifies the name of the setting to which the content applies. Possible values are: FirstLogonCommands and AutoLogon.",
                    "enum": [
                        "AutoLogon",
                        "FirstLogonCommands"
                    ],
                    "x-ms-enum": {
                        "name": "SettingNames",
                        "modelAsString": false
                    }
                },
                "content": {
                    "type": "string",
                    "description": "Specifies the XML formatted content that is added to the unattend.xml file for the specified path and component. The XML must be less than 4KB and must include the root element for the setting or feature that is being inserted."
                }
            },
            "description": "Specifies additional XML formatted information that can be included in the Unattend.xml file, which is used by Windows Setup. Contents are defined by setting name, component name, and the pass in which the content is applied."
        },
        "WinRMListener": {
            "properties": {
                "passName": {
                    "$ref": "#/definitions/PassNameSchema"
                },
                "protocol": {
                    "type": "string",
                    "description": "Specifies the protocol of WinRM listener. <br><br> Possible values are: <br>**http** <br><br> **https**",
                    "enum": [
                        "Http",
                        "Https"
                    ],
                    "x-ms-enum": {
                        "name": "ProtocolTypes",
                        "modelAsString": false
                    }
                },
                "certificateUrl": {
                    "type": "string",
                    "description": "This is the URL of a certificate that has been uploaded to Key Vault as a secret. For adding a secret to the Key Vault, see [Add a key or secret to the key vault](https://docs.microsoft.com/azure/key-vault/key-vault-get-started/#add). In this case, your certificate needs to be It is the Base64 encoding of the following JSON Object which is encoded in UTF-8: <br><br> {<br>  \"data\":\"<Base64-encoded-certificate>\",<br>  \"dataType\":\"pfx\",<br>  \"password\":\"<pfx-file-password>\"<br>}"
                }
            },
            "description": "Describes Protocol and thumbprint of Windows Remote Management listener"
        },
        "OptionalMachineProperties": {
            "properties": {
                "listener": {
                    "$ref": "#/definitions/WinRMListener"
                },
                "content": {
                    "$ref": "#/definitions/AdditionalContent"
                }
            },
            "description": "Describes the properties of a Virtual Machine."
        },
        "OptionalMachine": {
            "properties": {
                "plan": {
                    "$ref": "#/definitions/Plan",
                    "description": "Specifies information about the marketplace image used to create the virtual machine. This element is only used for marketplace images. Before you can use a marketplace image from an API, you must enable the image for programmatic use.  In the Azure portal, find the marketplace image that you want to use and then click **Want to deploy programmatically, Get Started ->**. Enter any required information and then click **Save**."
                },
                "properties": {
                    "x-ms-client-flatten": true,
                    "$ref": "#/definitions/OptionalMachineProperties"
                },
                "zones": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "The virtual machine zones."
                }
            },
            "allOf": [
                {
                    "$ref": "#/definitions/Resource"
                }
            ],
            "description": "Describes a Virtual Machine."
        },
        "VirtualMachineUpdate": {
            "properties": {
                "plan": {
                    "$ref": "#/definitions/Plan",
                    "description": "Specifies information about the marketplace image used to create the virtual machine. This element is only used for marketplace images. Before you can use a marketplace image from an API, you must enable the image for programmatic use.  In the Azure portal, find the marketplace image that you want to use and then click **Want to deploy programmatically, Get Started ->**. Enter any required information and then click **Save**."
                },
                "properties": {
                    "x-ms-client-flatten": true,
                    "$ref": "#/definitions/OptionalMachineProperties"
                },
                "zones": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "The virtual machine zones."
                }
            },
            "allOf": [
                {
                    "$ref": "#/definitions/UpdateResource"
                }
            ],
            "description": "Describes a Virtual Machine Update."
        },
        "OptionalMachineListResult": {
            "properties": {
                "value": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/OptionalMachine"
                    },
                    "description": "The list of virtual machines."
                },
                "nextLink": {
                    "type": "string",
                    "description": "The URI to fetch the next page of VMs. Call ListNext() with this URI to fetch the next page of Virtual Machines."
                }
            },
            "required": [
                "value"
            ],
            "description": "The List Virtual Machine operation response."
        },
        "Sku": {
            "properties": {
                "name": {
                    "type": "string",
                    "description": "The sku name."
                },
                "tier": {
                    "type": "string",
                    "description": "Specifies the tier of virtual machines in a scale set.<br /><br /> Possible Values:<br /><br /> **Standard**<br /><br /> **Basic**"
                },
                "capacity": {
                    "type": "integer",
                    "format": "int64",
                    "description": "Specifies the number of virtual machines in the scale set."
                }
            },
            "description": "Describes a virtual machine scale set sku. NOTE: If the new VM SKU is not supported on the hardware the scale set is currently on, you need to deallocate the VMs in the scale set before you modify the SKU name."
        },
        "ApiErrorBase": {
            "properties": {
                "code": {
                    "type": "string",
                    "description": "The error code."
                },
                "target": {
                    "type": "string",
                    "description": "The target of the particular error."
                },
                "message": {
                    "type": "string",
                    "description": "The error message."
                }
            },
            "description": "Api error base."
        },
        "InnerError": {
            "properties": {
                "exceptiontype": {
                    "type": "string",
                    "description": "The exception type."
                },
                "errordetail": {
                    "type": "string",
                    "description": "The internal error message or exception dump."
                }
            },
            "description": "Inner error details."
        },
        "CloudError": {
            "x-ms-external": true,
            "properties": {
                "error": {
                    "$ref": "#/definitions/ApiError"
                }
            },
            "description": "An error response from the Compute service."
        },
        "ApiError": {
            "properties": {
                "details": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/ApiErrorBase"
                    },
                    "description": "The Api error details"
                },
                "innererror": {
                    "$ref": "#/definitions/InnerError",
                    "description": "The Api inner error"
                },
                "code": {
                    "type": "string",
                    "description": "The error code."
                },
                "target": {
                    "type": "string",
                    "description": "The target of the particular error."
                },
                "message": {
                    "type": "string",
                    "description": "The error message."
                }
            },
            "description": "Api error."
        },
        "Resource": {
            "description": "The Resource model definition.",
            "properties": {
                "id": {
                    "readOnly": true,
                    "type": "string",
                    "description": "Resource Id"
                },
                "name": {
                    "readOnly": true,
                    "type": "string",
                    "description": "Resource name"
                },
                "type": {
                    "readOnly": true,
                    "type": "string",
                    "description": "Resource type"
                },
                "location": {
                    "type": "string",
                    "description": "Resource location"
                },
                "tags": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    },
                    "description": "Resource tags"
                }
            },
            "required": [
                "location"
            ],
            "x-ms-azure-resource": true
        },
        "UpdateResource": {
            "description": "The Update Resource model definition.",
            "properties": {
                "tags": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    },
                    "description": "Resource tags"
                }
            }
        }
    },
    "parameters": {
        "SubscriptionIdParameter": {
            "name": "subscriptionId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Subscription credentials which uniquely identify Microsoft Azure subscription. The subscription ID forms part of the URI for every service call."
        },
        "ApiVersionParameter": {
            "name": "api-version",
            "in": "query",
            "required": true,
            "type": "string",
            "description": "Client Api Version."
        }
    }
}
